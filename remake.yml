packages:
  - BBSclim
  - rBBS
  - RPresence
  
sources:
  - R/glob_opts.R

targets:
  all:
    depends:
      - inst/output/scta/route_clim.csv
      - inst/output/scta/route_map.pdf
  
  inst/output/scta:
    command: CreateSpp(I(alpha = "scta"))
    
  bbs:
    command: GetBBS(I(is.tenstops = tenstops))
    
  spp_AOU:
    command: GetAOU(I(alpha = alpha))

  inst/output/scta/scta_counts.csv:
    command: GetSppCounts(bbs_raw = bbs, AOU = spp_AOU, Write = TRUE, path = 'inst/output/scta')

  spp_counts:
    command: read.csv("inst/output/scta/scta_counts.csv")
    
  spp_counts2:
    command: RemoveOutliers(counts = spp_counts)

  inst/output/scta/count_buff.csv:
    command: buffer_BBS(spp_count = spp_counts2, bbs = bbs, I(alpha = alpha))
    
  inst/output/scta/route_map.pdf:
    command: make_route_plot(I(alpha = "scta"), used_routes = spp_counts2)
    depends:
      - inst/output/scta/count_buff.csv
      - inst/output/scta/scta_counts.csv
  
  NA_biovars:
    command: data(target_name)
    
  inst/output/scta/route_clim.csv:
    command: GetBioVars(I(alpha = "scta"))
    depends:
      - NA_biovars
      - inst/output/scta/count_buff.csv
      
  #inst/output/pao/scta.pao:
   # command: write_pao(counts = spp_buff, covs = spp_clim, I(alpha = alpha), I(is.tenstops = tenstops))


